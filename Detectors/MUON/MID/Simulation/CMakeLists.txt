o2_add_library(MIDSimulation
               SOURCES
               src/ChamberEfficiencyResponse.cxx
               src/ChamberHV.cxx
               src/ChamberResponse.cxx
               src/ChamberResponseParams.cxx
               src/Detector.cxx
               src/Digitizer.cxx
               src/DigitsMerger.cxx
               src/Geometry.cxx
               src/Hit.cxx
               src/Materials.cxx
               src/MCLabel.cxx
               src/Stepper.cxx
               PUBLIC_LINK_LIBRARIES
               O2::MIDBase
               O2::CommonDataFormat
               O2::DetectorsBase
               O2::SimulationDataFormat
               O2::MIDClustering)

o2_target_root_dictionary(MIDSimulation
                          HEADERS
                          include/MIDSimulation/ChamberEfficiencyResponse.h
                          include/MIDSimulation/ChamberHV.h
                          include/MIDSimulation/ChamberResponse.h
                          include/MIDSimulation/ChamberResponseParams.h
                          include/MIDSimulation/ColumnDataMC.h
                          include/MIDSimulation/Detector.h
                          include/MIDSimulation/Digitizer.h
                          include/MIDSimulation/DigitsMerger.h
                          include/MIDSimulation/Hit.h
                          include/MIDSimulation/MCLabel.h
                          include/MIDSimulation/Stepper.h)

if(BUILD_TESTING)
  add_subdirectory(test)

  o2_add_test_root_macro(macros/drawMIDGeometry.C
                         PUBLIC_LINK_LIBRARIES
                         FairRoot::Base
                         DetectorsPassive
                         MIDSimulation
                         LABELS
                         mid)
endif()
