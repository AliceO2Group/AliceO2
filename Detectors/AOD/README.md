<!-- doxy
\page refDetectorsAOD AOD producers
/doxy -->

# AOD producers

The code in this directory is meant to produce `AO2D.root` output
files.   There are two such producers:

- [`o2-aod-producer-workflow`](src/AODProducerWorkflowSpec.cxx) that
  produces `AO2D.root` from reconstructed data (whether from
  simulations or the experiment).  The output will contain
  reconstructed tracks "calo" hits, and so on.
- [`o2-aod-mc-producer-workflow`](src/AODMcProducerWorkflowSpec.cxx)
  that produces `AO2D.root` from simulation data only. The output will
  only contain the simulation particles and collision headers.

## Do a full simulation to AO2D chain

You need [`O2DPG`](https://github.com/AliceO2Group/O2DPG/) installed.

Then, a script a la

    #!/bin/bash
    #
    # A example workflow MC->RECO->AOD for a simple pp production
    # excluding ZDC
    NWORKERS=${NWORKERS:-6}
    SIMENGINE=${SIMENGINE:-TGeant4}

    ${O2DPG_ROOT}/MC/bin/o2dpg_sim_workflow.py \
                 -eCM 14000 \
                 -col pp \
                 -gen pythia8 \
                 -proc "cdiff" \
                 -tf 2  \
                 -ns 50 \
                 -e ${SIMENGINE} \
                 -j ${NWORKERS} \
                 -run 303000 \
                 -seed 624 \
                 -interactionRate 50000

    ${O2DPG_ROOT}/MC/bin/o2_dpg_workflow_runner.py -f workflow.json -tt aod

will set-up a chain and run it.  The above will make 2 time-frames,
each with 50 pp collisions at sqrt(s)=14TeV generated by Pythia8.

See also [this page](https://aliceo2group.github.io/simulation/) for more on simulations with O2.

